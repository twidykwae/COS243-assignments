{% extends "base.html" %}

{% block content %}
  {% if card %}
    <h2>Edit Card</h2>
    <form method="post" action="/cards/{{ card.id }}/edit">
      <label>Front:</label>
      <input type="text" name="front" value="{{ card.front }}" required><br>

      <label>Back:</label>
      <input type="text" name="back" value="{{ card.back }}" required><br>

      <label>Set:</label>
      <select name="set_ID">
        {% for set in sets %}
          <option value="{{ set.id }}" {% if set.id == card.set_ID %}selected{% endif %}>
            {{ set.name }}
          </option>
        {% endfor %}
      </select><br>

      <button type="submit">Update Card</button>
    </form>

    <form method="post" action="/cards/{{ card.id }}/delete" style="margin-top: 1em;">
      <button type="submit" onclick="return confirm('Are you sure you want to delete this card?');">
        Delete Card
      </button>
    </form>

  {% else %}
    <h2>Add a New Card</h2>
    <form method="post" action="/cards/add">
      <label>Front:</label>
      <input type="text" name="front" required><br>

      <label>Back:</label>
      <input type="text" name="back" required><br>

      <label>Set:</label>
      <select name="set_ID">
        {% for set in sets %}
          <option value="{{ set.id }}">{{ set.name }}</option>
        {% endfor %}
      </select><br>

      <button type="submit">Save Card</button>
    </form>
  {% endif %}
{% endblock %}
